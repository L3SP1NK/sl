#!/bin/bash
## Get the current temperature, display an emoji icons accordingly.

#icons=( 'ðŸ§Š' 'ðŸ¥¶' 'ðŸ˜Ž' 'ðŸ¥µ' 'ðŸ”¥' '?' )
icons=( 'ï‹‹' 'ï‹Š' 'ï‹‰' 'ï‹ˆ' 'ï‹‡' )

temp_crit=$(
	sensors \
		| grep 'crit' \
		| awk '{print $9}' \
		| cut -d '.' -f 1 \
		| sort -u \
		| tac \
		| tr -d '+' \
		| head -n 1
)

temp_freeze='0'

temp_high=$( echo "${temp_crit} / 1.5" | bc )
temp_normal=$(( "${temp_crit}" / 2 ))
temp_low=$( echo "${temp_crit} / 3" | bc )

sensor='temp1'

temp=$(
	sensors \
		| grep "${sensor}" \
		| awk {'print $2'} \
		| tr -d '+' \
		| cut -d '.' -f 1 \
)

case "${temp}" in

	## 0 -> 20Â°C
	[0-9]|1[0-9]|20)
		icon="${icons[0]}"
		;;

	## 21 -> 39Â°C
	[2][1-9]|3[0-9])
		icon="${icons[1]}"
		;;

	## 40 -> 59Â°C
	[4][0-9]|5[0-9])
		icon="${icons[2]}"
		;;

	## 60 -> 79Â°C
	[6][0-9]|7[0-9])
		icon="${icons[3]}"
		;;

	## 80 -> 100Â°C
	[8][0-9]|9[0-9]|100)
		icon="${icons[4]}"
		;;

	## unknown Â°C
	*)
		icon="${icons[5]}"
		;;

esac

echo "${icon}"
